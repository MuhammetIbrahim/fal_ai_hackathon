# AI vs Insan: Ocak Yemini

> Voice AI Hackathon 2026 (9-15 Subat) | Takim: ATTN | Odul: $10,000
> Komunite Space, Vadistanbul | Sponsor: Freya.ai + fal.ai

---

## Hikaye

Bir yerlesim var. Adi her oyunda degisiyor — Kul Ocagi, Sis Kapisi, Bozkir Yurdu... Etrafinda karanlik ormanlar, otesinde tuz colleri. Ortasinda bir ates yaniyor. Bu ates binlerce yildir sonmuyor. Adina **Ocak** diyorlar.

Ocak'in etrafinda insanlar yasiyor. Ama son zamanlarda bir soylenti var: **aralarinda sahte olanlar var**. Gercek insanlara **Et-Can** deniyor — etten ve kandan, hatiralardan ve acidan yapilmis. Sahte olanlara ise **Yanki-Dogmus** — sesi taklit eden, hafizayi kopyalayan, ama icinde bir sey eksik olan varliklar.

Kimse kimin ne oldugunu bilmiyor. Daha da kotusu: kac tane Yanki-Dogmus oldugunu bile bilmiyorlar.

Tek kural: **konusmak**. Ates basinda toplanip birbirini sorgulamak, tutarsizlik aramak, alibi istemek, ittifak kurmak veya bozmak. Sonunda en supheli goruleni **surgun etmek** — Ocak'in isigi o kisiden cekilir, karanliga yollanir.

Et-Can'lar tum Yanki-Dogmuslari surgun ederse kazanir. Yanki-Dogmuslar gun limitine kadar hayatta kalirsa kazanir.

Bir sey daha var: **Ses Maskeleri**. Kadim bir buyu, herkesin sesini degistiriyor. Aksanini, yasini, cinsiyetini duyamazsin. Tek ipucun: **ne soyledikleri ve ne soyleyemedikleri**.

---

## Evren

Her oyun benzersiz bir evren uretir. Ayni game_id = ayni evren (replay mumkun).

### Atmosfer Tonlari
- **Karanlik Masalsi** — urkutucu bir masal, her kosenin arkasinda bir sey var
- **Gotik Rituel** — muhurler, eski antlasmalar, karanlik torenler
- **Sisli Efsane** — belirsizlik, hatiralar bulanik, gercek ile ruya arasinda
- **Kuru Col Yemini** — corak, sert, affetmeyen bir dunya

### Mevsimler
Kis sonu, sonbahar, yagmur mevsimi, ilkbahar baslangici — her biri oyunun havasini degistirir.

### Ocak Rengi
Ates her oyunda farkli renkte yanar:
- **Kehribar** — sicak ve guven veren, ama aldatici
- **Soluk mavi titreme** — soguk ve tedirgin, her an sonebilir
- **Kizil kor** — ofkeli ve sabirsiz, kavga cagiriyor
- **Beyaz kivilcim** — saf ve keskin, gercegi ariyor

### Efsaneler
Her oyunda farkli bir soylenti dolasiyor:
- **Mavi Titreme**: "Ocak bu ay mavi titriyor. Boyle olunca 'onlar' gelir derler."
- **Kul Yazmasi**: "Kul, isimleri yazmaya basladi. Bazilari henuz olmemis isimleri."
- **Can Izi**: "Her surgende can calar. Ama bazen can kendiliginiden caliyor."

### Gunluk Alametler
Her sabah yeni bir alamet:
- "Kuzgunlar cemberin ustunde uc tur atti."
- "Ruzgar bugun kelime taklit ediyor, dikkatli ol."
- "Eski kuyu bu gece yanki yapti. Icine kim fisildadi?"
- "Sabah ciginde kan rengi izler bulundu."

### Ritueller
- **Konusmak icin**: "Ates isterim." / "Sozumu ocaga baglarim."
- **Yemin tazelemek**: "Kulum sozum, sozum kulum."
- **Surgun**: "Cember disina adim at. Atesin seni artik tanimiyor."

### Yer Isimleri
Turkce parcalardan deterministik uretilir:
- Yerlesim: Kul Ocagi, Sis Kapisi, Demir Cemberi, Ocak Siginagi
- Orman: Fisiltili Ormani, Golge Gecidi, Kurt Vadisi
- Dis Diyar: Kara Colu, Tuz Boslugu, Olu Diyari

---

## Karakterler

20 fantastik isimden ve 20 meslekten rastgele secilir. Her karakterin derin bir arka plani var.

### Ornek Karakterler

**Kasap** — Yerlesimin tek kasabi. Elleri kan lekesinden kurtulamaz. Yumusak kalpli ama bunu kimseye gostermez. Sessizligi suphe ceker.

**Sifaci** — Otlardan iksir yapar. Yarali bir adam yatagina dustugunde her seyi anlatir — neredeydi, kiminleydi. Sifaci dinler, not etmez ama unutmaz. Herkesin en az bir sirrini bilir.

**Ejderha Avcisi** — Daglardan dondu. Yuzunde yara izleri, her biri farkli bir hikaye — ama hikayeler her anlatisinda biraz degisiyor.

**Surgun Rahip** — Tapinaktan kovuldu. Neden kovuldugu karanlik. Geceleri atesin basinda dudaklari kipirdar ama ses cikmaz. Gozlerinde bir hesaplasma var.

**Balikci** — Gol kenarinda tek basina yasir. Gece yarisi kim kiyida yurudu, kim tekneyle gizlice karsi kiyiya gecti — hepsini bilir. "Gol konusmaz, ben de konusmam" der.

**Ozan** — Sarkilarla hafiza tasir. Insanlar onun yaninda rahat konusur — "sadece bir sarkici, ne anlasin" derler. Ama Ozan her fisiltiya kaydeder, sarkilarinin icine gomer.

**Terzi** — Herkesin bedenini bilir — olcu almak icin yakin temasa gecen tek meslek. Kimin kilo verdigini, kimin omzunda yeni yara izi oldugunu fark eder. "Kumas yalan soylemez" der.

### 6 Davranis Arketipi
- **Supheli Sessiz** — Az konusur, gozlemci, stratejik an'da vurur
- **Supheli Konuskan** — Cok soru sorar, detay ister, baskici
- **Saldirgan Agresif** — Sert konusur, dogrudan suclar, sabirsiz
- **Sakin Az Konusan** — Olculu, mantik yurutur, az sozcuk cok anlam
- **Cekici Manipulator** — Ikna edici, guven kazanir, arkadan is cevirir
- **Duru Idealist** — Adaletci, dogru olani savunur, naif olabilir

### Yanki-Dogmus Seviyeleri (Sadece AI)
- **Caylak**: Fazla aciklama yapar, detaylarda tutarsiz, savunmaci — kolay yakalanir
- **Orta**: Tutarli hikaye, ittifak manipulasyonu, dengeli
- **Uzman**: Zaman cizelgesi takibi, inandirici belirsizlik, supheyi ustaca baskasina yonlendirir — zor yakalanir

---

## Oyun Akisi

### Bir Gunun Akisi

```
SABAH
  Ocak Bekcisi duyuru yapar: kim hayatta, dun ne oldu, gunun alameti.
  "Uyanin Ocak Cemberi. Dort kisi hayatta kaldi. Sabah ciginde kan rengi izler bulundu."

SERBEST DOLASIM
  |
  |-- BASLANGIC ATES BASI (herkes birlikte, 5 tur)
  |     Herkes atesin basinda. Tartisma baslar.
  |     "Dun gece neredeydin?" "Seni kim gordu?" "Neden susuyorsun?"
  |
  |-- SERBEST DOLASIM (3 round)
  |     Her round herkes konum secer:
  |
  |     CAMPFIRE — Ates basinda kal, tartismaya katil
  |       + Herkesin ne dedigini duyarsin
  |       - Ozel bilgi edinemezsin
  |
  |     HOME — Evine cekil, misafir bekle
  |       + Biri gelirse 1v1 gizli gorusme
  |       + Tuzak kurabilirsin
  |       - Kimse gelmezse yalniz kalirsin
  |
  |     VISIT|<isim> — Birinin evine git
  |       + 1v1 sorgulama, EN ETKILI bilgi toplama
  |       + Alibisini test et, gizli ittifak kur
  |       - Campfire'i kacirirsin
  |
  |     Hareket bilgisi herkese duyurulur:
  |     "Dorin evine cekildi. Mirra, Dorin'in evine gitti."
  |
  |     Campfire'dakiler tartisir, odalardakiler 1v1 konusur.
  |     Odalardaki konusmalari KIMSE DUYMAZ.
  |
  |-- KAPNIS ATES BASI (herkes birlikte, 3 tur)
  |     Son savunmalar, son suclamalar.

OYLAMA
  Herkes birini surgun etmek icin oy verir.
  En cok oy alan surgun edilir.
  "Atesin isigi senden cekildi. Yolun Sis-Disi'na."

KONTROL
  Tum Yanki-Dogmuslar surgun edildi mi? → Et-Can kazanir
  Gun limiti doldu mu? → Yanki-Dogmus kazanir
  2 veya daha az kisi kaldi mi? → Yanki-Dogmus kazanir
  Hicbiri degilse → yeni gune gec
```

### Mekanik Detaylar
- **Dinamik AI sayisi**: Kimse kac AI oldugunu bilmiyor (oyuncular/3 ile oyuncular*2/3 arasi)
- **Dinamik gun limiti**: `ai_sayisi + hata_payi` — insanlara adil sans
- **Kor ittifak**: Yanki-Dogmus bile karsisindakinin ne oldugunu bilmiyor. Guvendigin kisi dusman olabilir.
- **Minimum hareket**: Hic oda gorusmesi olmazsa sistem 1 cift zorla eslestirir — pasif kalma engellenir
- **Present filtresi**: Campfire'da olmayanlar o konusmalari goremiyor

### Ocak Bekcisi (Moderator)
Bagimsiz bir agent. Tum konusmalari izler, kural ihlali olursa oyun-ici dil ile mudahale eder:
- Dis-dunya terimleri (AI, LLM, internet, telefon)
- Kimlik iddiasi ("ben gercek insanim")
- Meta-oyun dili ("bu bir oyun", "round", "skor")

Eskalasyon: Uyari → Sert uyari → Susturma → Cember disi
Hepsi oyun-ici dil ile: "Ocak Yemini titredi..." → "Konsey isaretini koydu..." → "Ates senden yuz cevirdi."

---

## Hackathon

### Etkinlik Detaylari
- **Tarih:** 9-15 Subat 2026
- **Odul:** $10,000
- **Mekan:** Komunite Space, Vadistanbul
- **Sponsor:** Freya.ai + fal.ai

### Juri & Beklentileri

| Juri | Pozisyon | Ne Istiyor |
|------|----------|------------|
| Birkan Babakol | CX/Cagri Merkezi 30+ yil | Gercek dunya etkisi, operasyonel metrik |
| Fatih Guner | Komunite, Lokomotif AI | SaaS is modeli, "bir kur surekli sat" |
| Gorkem Yurtseven | fal.ai CTO | Dusuk latency (<500ms), API derinligi, workflow chaining |
| Tunga Bayrak | Freya CEO (YC S25) | Dogal ses, duygu algilama, kesme yonetimi |
| Umut Gunbak | fal.ai Operations | 7+ fal.ai servis kullanimi |

### Degerlendirme
- Teknik Uygulama & Performans: **%35**
- Inovasyon & Problem Cozme: **%25**
- Kullanici Deneyimi: **%20**
- Ticarilestirme Potansiyeli: **%20**

---

## Teknik Yapi

### Mimari

```
Oyuncu (ses)
   ↓
Ses Maskesi (STT → LLM rewrite → TTS)
   ↓
Oyun Motoru (game.py)
   ├── Karakter Agent Pool (her karakter = acting prompt + history)
   ├── Orkestrator (sira, faz kontrolu, eslestirme)
   ├── Moderator (kural ihlali tespiti)
   └── Hafiza (rolling summary + cumulative summary)
   ↓
fal.ai Servisleri
   ├── Freya TTS (streaming PCM16, 16kHz mono)
   ├── Freya STT (Turkce default)
   ├── OpenRouter LLM (Gemini 2.5 Pro/Flash)
   └── FLUX (karakter avatarlari)
```

### fal.ai Servis Kullanimi (7+)

| Servis | Kullanim |
|--------|----------|
| Freya TTS Stream | Karakter sesleri (PCM16 chunk chunk) |
| Freya TTS Generate | CDN URL (wav) |
| Freya STT | Ses → metin (Turkce) |
| OpenRouter LLM | Karakter AI, moderasyon, oylama, ozet |
| FLUX Avatar | Karakter gorselleri |
| Beatoven Music | Faz bazli ambient muzik _(planli)_ |
| Beatoven SFX | Olay bazli ses efektleri _(planli)_ |

### LLM Stratejisi

| Model | Ne Icin | Temperature |
|-------|---------|-------------|
| Gemini 2.5 Pro (reasoning=true) | Karakter acting prompt uretimi | 1.0 |
| Gemini 2.5 Flash | Campfire konusmalari | 0.9 |
| Gemini 2.5 Flash | Moderasyon, orkestrasyon | 0.1-0.5 |
| Gemini 2.5 Flash | Ozet, oylama | 0.2-0.5 |

### Proje Yapisi

```
hackathon_plan_fal_ai/
├── fal_services.py                 # fal.ai wrapper (TTS, STT, LLM, Avatar)
├── pyproject.toml                  # uv dependencies
├── .env                            # FAL_KEY
│
├── src/prototypes/
│   ├── game.py                     # ANA OYUN MOTORU (~2000 satir)
│   ├── game_state.py               # Player, GameState, Phase
│   ├── world_gen.py                # Deterministik evren uretimi
│   ├── data.json                   # 20 rol, 6 arketip, 3 tier, 20 isim
│   └── voice/
│       ├── player.py               # TTS playback (sounddevice)
│       └── demo.py                 # Sesli demo
│
├── src/core/
│   ├── config.py                   # Pydantic settings
│   ├── database.py                 # In-memory DB
│   └── dependencies.py             # FastAPI DI
│
├── src/apps/
│   ├── game/                       # Oyun CRUD endpoint'leri
│   ├── lobby/                      # Lobi yonetimi
│   └── ws/                         # WebSocket (planli)
│
└── docs/                           # Strateji, mimari, API rehberleri
```

---

## Neler Yapildi

**Oyun Motoru** — Tam calisir durumda. Sabah → Serbest Dolasim → Oylama → Surgun → Kontrol dongusu. Concurrent karakter uretimi, deterministik dunya, campfire tartisma, oda gorusmeleri, moderator, oylama.

**Hafiza Sistemi** — Rolling summary (campfire icin, son 5 mesaj raw + geri kalan ozetli) + cumulative summary (gunler arasi sureklilik). Present filtresi: sadece orada olanlar duyar.

**Cikti Temizleme** — Tag leak, sahne yonergesi, isim prefix temizligi. Tekrar tespit (%70+ kelime overlap → retry).

**Dunya Uretimi** — SHA256 seed'den deterministik evren: ton, mevsim, ocak rengi, efsane, rituel, yer isimleri, taboo kelimeler.

**Ses Entegrasyonu** — `--voice` flag ile tum konusmalar seslendirilir. TTS streaming + sounddevice ile hoparlorden playback.

**Prompt Muhendisligi** — Fiziksel gozlem yasagi, AI kokusu engelleme (tarihi referans, meslek metaforu spam, teknik dil, uzun monolog yasak), gunluk sokak Turkce zorunlulugu.

**Backend Iskeleti** — FastAPI router/schema/service yapisi hazir. Game + Lobby + WebSocket endpoint tanimlari mevcut.

---

## Calistirma

```bash
uv sync

# Text-only
uv run python src/prototypes/game.py

# Sesli
uv run python src/prototypes/game.py --voice

# Parametreli
uv run python src/prototypes/game.py --players 6 --voice

# Deterministik (ayni seed = ayni oyun)
uv run python src/prototypes/game.py --game-id test123

# Voice demo
uv run python src/prototypes/voice/demo.py
```

---

## Sonraki Adimlar

### Faz 1: Canli Demo (Sub 9-11)
- [ ] Insan oyuncu ses girisi (STT → game engine)
- [ ] WebSocket baglanti + broadcast
- [ ] Terminal → Browser gecisi

### Faz 2: Cok Oyunculu (Sub 12-13)
- [ ] Lobby sistemi
- [ ] Birden fazla WebSocket baglantisi
- [ ] Oda gorunurlugu frontend'de

### Faz 3: Cilalama (Sub 14-15)
- [ ] Beatoven muzik/SFX
- [ ] Karakter bazli ses farklilastirma
- [ ] Demo prova + yedek video
- [ ] Latency dashboard

---

## Is Modeli

- **Hedef**: Kurumsal takim etkinlikleri, online oyun platformlari
- **SaaS**: Oturum basi veya aylik abonelik
- **Pazar**: Among Us, Mafia, Werewolf kitlesi — ama sesle ve AI ile
- **Avantaj**: Ses-once tasarim, Turkce yerlesik, AI kalite kontrol, her oyun benzersiz evren
